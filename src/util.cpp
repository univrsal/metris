/* This file is part of Metris
 * licensed under the GPL 2.0
 * github.com/univrsal/metris
 */

#include "util.hpp"

sprite_id const_j_brick_0[4][4] = {
    {ID_EMPTY, ID_EMPTY, ID_EMPTY, ID_EMPTY},
    {ID_J_BRICK, ID_J_BRICK, ID_J_BRICK, ID_EMPTY},
    {ID_EMPTY, ID_EMPTY, ID_J_BRICK, ID_EMPTY},
    {ID_EMPTY, ID_EMPTY, ID_EMPTY, ID_EMPTY}
};
sprite_id const_j_brick_90[4][4] = {
    {ID_EMPTY, ID_J_BRICK, ID_EMPTY, ID_EMPTY},
    {ID_EMPTY, ID_J_BRICK, ID_EMPTY, ID_EMPTY},
    {ID_J_BRICK, ID_J_BRICK, ID_EMPTY, ID_EMPTY},
    {ID_EMPTY, ID_EMPTY, ID_EMPTY, ID_EMPTY}
};
sprite_id const_j_brick_180[4][4] = {
    {ID_J_BRICK, ID_EMPTY, ID_EMPTY, ID_EMPTY},
    {ID_J_BRICK, ID_J_BRICK, ID_J_BRICK, ID_EMPTY},
    {ID_EMPTY, ID_EMPTY, ID_EMPTY, ID_EMPTY},
    {ID_EMPTY, ID_EMPTY, ID_EMPTY, ID_EMPTY}
};
sprite_id const_j_brick_270[4][4] = {
    {ID_EMPTY, ID_J_BRICK, ID_J_BRICK, ID_EMPTY},
    {ID_EMPTY, ID_J_BRICK, ID_EMPTY, ID_EMPTY},
    {ID_EMPTY, ID_J_BRICK, ID_EMPTY, ID_EMPTY},
    {ID_EMPTY, ID_EMPTY, ID_EMPTY, ID_EMPTY}
};
sprite_id const_l_brick_0[4][4] = {
    {ID_EMPTY, ID_EMPTY, ID_L_BRICK, ID_EMPTY},
    {ID_L_BRICK, ID_L_BRICK, ID_L_BRICK, ID_EMPTY},
    {ID_EMPTY, ID_EMPTY, ID_EMPTY, ID_EMPTY},
    {ID_EMPTY, ID_EMPTY, ID_EMPTY, ID_EMPTY}
};
sprite_id const_l_brick_90[4][4] = {
    {ID_EMPTY, ID_L_BRICK, ID_EMPTY, ID_EMPTY},
    {ID_EMPTY, ID_L_BRICK, ID_EMPTY, ID_EMPTY},
    {ID_EMPTY, ID_L_BRICK, ID_L_BRICK, ID_EMPTY},
    {ID_EMPTY, ID_EMPTY, ID_EMPTY, ID_EMPTY}
};
sprite_id const_l_brick_180[4][4] = {
    {ID_EMPTY, ID_EMPTY, ID_EMPTY, ID_EMPTY},
    {ID_L_BRICK, ID_L_BRICK, ID_L_BRICK, ID_EMPTY},
    {ID_L_BRICK, ID_EMPTY, ID_EMPTY, ID_EMPTY},
    {ID_EMPTY, ID_EMPTY, ID_EMPTY, ID_EMPTY}
};
sprite_id const_l_brick_270[4][4] = {
    {ID_L_BRICK, ID_L_BRICK, ID_EMPTY, ID_EMPTY},
    {ID_EMPTY, ID_L_BRICK, ID_EMPTY, ID_EMPTY},
    {ID_EMPTY, ID_L_BRICK, ID_EMPTY, ID_EMPTY},
    {ID_EMPTY, ID_EMPTY, ID_EMPTY, ID_EMPTY}
};
sprite_id const_t_brick_90[4][4] = {
    {ID_EMPTY, ID_T_BRICK, ID_EMPTY, ID_EMPTY}, {ID_T_BRICK, ID_T_BRICK, ID_T_BRICK, ID_EMPTY},
    {ID_EMPTY, ID_EMPTY, ID_EMPTY, ID_EMPTY}, {ID_EMPTY, ID_EMPTY, ID_EMPTY, ID_EMPTY}
};
sprite_id const_t_brick_0[4][4] = {
    {ID_EMPTY, ID_T_BRICK, ID_EMPTY, ID_EMPTY}, {ID_EMPTY, ID_T_BRICK, ID_T_BRICK, ID_EMPTY},
    {ID_EMPTY, ID_T_BRICK, ID_EMPTY, ID_EMPTY}, {ID_EMPTY, ID_EMPTY, ID_EMPTY, ID_EMPTY}
};
sprite_id const_t_brick_270[4][4] = {
    {ID_EMPTY, ID_EMPTY, ID_EMPTY, ID_EMPTY}, {ID_T_BRICK, ID_T_BRICK, ID_T_BRICK, ID_EMPTY},
    {ID_EMPTY, ID_T_BRICK, ID_EMPTY, ID_EMPTY}, {ID_EMPTY, ID_EMPTY, ID_EMPTY, ID_EMPTY}
};
sprite_id const_t_brick_180[4][4] = {
    {ID_EMPTY, ID_T_BRICK, ID_EMPTY, ID_EMPTY},
    {ID_T_BRICK, ID_T_BRICK, ID_EMPTY, ID_EMPTY},
    {ID_EMPTY, ID_T_BRICK, ID_EMPTY, ID_EMPTY},
    {ID_EMPTY, ID_EMPTY, ID_EMPTY, ID_EMPTY}
};
sprite_id const_s_brick_0[4][4] = {
    {ID_EMPTY, ID_EMPTY, ID_EMPTY, ID_EMPTY},
    {ID_EMPTY, ID_S_BRICK, ID_S_BRICK, ID_EMPTY},
    {ID_S_BRICK, ID_S_BRICK, ID_EMPTY, ID_EMPTY},
    {ID_EMPTY, ID_EMPTY, ID_EMPTY, ID_EMPTY}
};
sprite_id const_s_brick_90[4][4] = {
    {ID_S_BRICK, ID_EMPTY, ID_EMPTY, ID_EMPTY},
    {ID_S_BRICK, ID_S_BRICK, ID_EMPTY, ID_EMPTY},
    {ID_EMPTY, ID_S_BRICK, ID_EMPTY, ID_EMPTY},
    {ID_EMPTY, ID_EMPTY, ID_EMPTY, ID_EMPTY}
};
sprite_id const_z_brick_0[4][4] = {
    {ID_EMPTY, ID_EMPTY, ID_EMPTY, ID_EMPTY},
    {ID_Z_BRICK, ID_Z_BRICK, ID_EMPTY, ID_EMPTY},
    {ID_EMPTY, ID_Z_BRICK, ID_Z_BRICK, ID_EMPTY},
    {ID_EMPTY, ID_EMPTY, ID_EMPTY, ID_EMPTY}
};
sprite_id const_z_brick_90[4][4] = {
    {ID_EMPTY, ID_EMPTY, ID_Z_BRICK, ID_EMPTY},
    {ID_EMPTY, ID_Z_BRICK, ID_Z_BRICK, ID_EMPTY},
    {ID_EMPTY, ID_Z_BRICK, ID_EMPTY, ID_EMPTY},
    {ID_EMPTY, ID_EMPTY, ID_EMPTY, ID_EMPTY}
};
sprite_id const_square_brick_0[4][4] = {
    {ID_SQUARE_BRICK, ID_SQUARE_BRICK, ID_EMPTY, ID_EMPTY}, {ID_SQUARE_BRICK, ID_SQUARE_BRICK, ID_EMPTY, ID_EMPTY},
    {ID_EMPTY, ID_EMPTY, ID_EMPTY, ID_EMPTY}, {ID_EMPTY, ID_EMPTY, ID_EMPTY, ID_EMPTY}
};
sprite_id const_i_brick_90[4][4] = {
    {ID_EMPTY, ID_EMPTY, ID_I_BRICK_TOP_90, ID_EMPTY}, {ID_EMPTY, ID_EMPTY, ID_I_BRICK_MID_90, ID_EMPTY},
    {ID_EMPTY, ID_EMPTY, ID_I_BRICK_MID_90, ID_EMPTY}, {ID_EMPTY, ID_EMPTY, ID_I_BRICK_BTM_90, ID_EMPTY}
};
sprite_id const_i_brick_0[4][4] = {
    {ID_EMPTY, ID_EMPTY, ID_EMPTY, ID_EMPTY}, {ID_I_BRICK_TOP, ID_I_BRICK_MID, ID_I_BRICK_MID, ID_I_BRICK_BTM},
    {ID_EMPTY, ID_EMPTY, ID_EMPTY, ID_EMPTY}, {ID_EMPTY, ID_EMPTY, ID_EMPTY, ID_EMPTY}
};

sprite_id get_shape_for_type(sprite_id type, rotation rotation, int x, int y)
{
    switch (type)
    {
    case ID_I_BRICK_BTM:
        switch (rotation)
        {
        case ROT_0:
        case ROT_180:
            return const_i_brick_90[x][y];
        case 90:
        case 270:
            return const_i_brick_0[x][y];
        }
        break;
    case ID_SQUARE_BRICK:
        return const_square_brick_0[x][y];
        break;
    case ID_T_BRICK:
        switch (rotation)
        {
        case ROT_0:
            return const_t_brick_0[x][y];
        case ROT_180:
            return const_t_brick_180[x][y];
        case ROT_90:
            return const_t_brick_90[x][y];
        case 270:
            return const_t_brick_270[x][y];
        }
        break;
    case ID_S_BRICK:
        switch (rotation)
        {
        case ROT_0:
        case ROT_180:
            return const_s_brick_0[x][y];
        case 270:
        case ROT_90:
            return const_s_brick_90[x][y];
        }
        break;
    case ID_Z_BRICK:
        switch (rotation)
        {
        case ROT_0:
        case ROT_180:
            return const_z_brick_0[x][y];
        case ROT_90:
        case 270:
            return const_z_brick_90[x][y];
        }
        break;
    case ID_L_BRICK:
        switch (rotation)
        {
        case ROT_0:
            return const_l_brick_0[x][y];
        case ROT_180:
            return const_l_brick_180[x][y];
        case ROT_90:
            return const_l_brick_90[x][y];
        case 270:
            return const_l_brick_270[x][y];
        }
        break;
    case ID_J_BRICK:
        switch (rotation)
        {
        case ROT_0:
            return const_j_brick_0[x][y];
        case ROT_180:
            return const_j_brick_180[x][y];
        case ROT_90:
            return const_j_brick_90[x][y];
        case 270:
            return const_j_brick_270[x][y];
        }
        break;
    default:
        return ID_EMPTY;
    }
}

SDL_Point util_shift(const SDL_Point p, const int16_t x, const int16_t y, const int scale)
{
    return SDL_Point{p.x + x * scale, p.y + y * scale};
}
